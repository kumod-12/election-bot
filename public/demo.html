<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElectionSathi Embed Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
        }
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #4f46e5;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .button {
            background: #4f46e5;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .button:hover {
            background: #4338ca;
        }
        .button.secondary {
            background: #6b7280;
        }
        .button.secondary:hover {
            background: #4b5563;
        }
        .analytics-panel {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4f46e5;
        }
        .stat-label {
            font-size: 12px;
            color: #6b7280;
            text-transform: uppercase;
        }
        .warning {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ElectionSathi Embed Demo</h1>
        <p>This page demonstrates how to embed ElectionSathi as a widget on any website.</p>

        <div class="warning">
            <strong>‚ö†Ô∏è Demo Mode:</strong> This demo uses placeholder API keys. To use in production, replace with your actual OpenAI or Anthropic API key.
        </div>

        <div class="demo-section">
            <h2>üöÄ Live Widget Demo</h2>
            <p>The ElectionSathi widget is currently active on this page. Look for the chat icon in the bottom-right corner!</p>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="button" onclick="openWidget()">Open Widget</button>
                <button class="button secondary" onclick="closeWidget()">Close Widget</button>
                <button class="button secondary" onclick="switchTheme()">Switch Theme</button>
                <button class="button secondary" onclick="changePosition()">Change Position</button>
            </div>
        </div>

        <div class="demo-section">
            <h2>üìä Real-time Analytics</h2>
            <p>Track user engagement and widget performance:</p>

            <div class="analytics-panel">
                <h3>Session Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="messages-count">0</div>
                        <div class="stat-label">Messages Sent</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="session-duration">0s</div>
                        <div class="stat-label">Session Duration</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="widget-opens">0</div>
                        <div class="stat-label">Widget Opens</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="feedback-given">0</div>
                        <div class="stat-label">Feedback Given</div>
                    </div>
                </div>

                <h4 style="margin-top: 20px;">Recent Events:</h4>
                <div id="recent-events" style="max-height: 150px; overflow-y: auto; background: white; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px;">
                    <div style="color: #6b7280;">Events will appear here as you interact with the widget...</div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>üíª Integration Code Examples</h2>

            <h3>Method 1: Simple Script Tag</h3>
            <div class="code-block">
&lt;script
  src="https://your-domain.com/embed.js"
  data-election-sathi-api-key="your-api-key-here"
  data-api-provider="openai"
  data-position="bottom-right"
  data-theme="light"&gt;
&lt;/script&gt;
            </div>

            <h3>Method 2: JavaScript API</h3>
            <div class="code-block">
&lt;script src="https://your-domain.com/embed.js"&gt;&lt;/script&gt;
&lt;script&gt;
  const widget = ElectionSathi.init('your-api-key-here', {
    position: 'bottom-right',
    theme: 'light',
    apiProvider: 'openai',
    width: '400px',
    height: '600px'
  });
&lt;/script&gt;
            </div>

            <h3>Method 3: React Component</h3>
            <div class="code-block">
import ElectionWidget from './ElectionWidget';

function App() {
  return (
    &lt;ElectionWidget
      apiKey="your-api-key-here"
      apiProvider="openai"
      position="bottom-right"
      theme="light"
    /&gt;
  );
}
            </div>
        </div>

        <div class="demo-section">
            <h2>‚öôÔ∏è Configuration Options</h2>
            <p>Customize the widget to match your website:</p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                <div>
                    <strong>Position:</strong>
                    <div style="margin-top: 5px;">
                        <button class="button" onclick="setPosition('bottom-right')">Bottom Right</button>
                        <button class="button" onclick="setPosition('bottom-left')">Bottom Left</button>
                        <button class="button" onclick="setPosition('top-right')">Top Right</button>
                        <button class="button" onclick="setPosition('top-left')">Top Left</button>
                    </div>
                </div>
                <div>
                    <strong>Theme:</strong>
                    <div style="margin-top: 5px;">
                        <button class="button" onclick="setTheme('light')">Light</button>
                        <button class="button" onclick="setTheme('dark')">Dark</button>
                    </div>
                </div>
                <div>
                    <strong>Size:</strong>
                    <div style="margin-top: 5px;">
                        <button class="button" onclick="setSize('400px', '600px')">Default</button>
                        <button class="button" onclick="setSize('350px', '500px')">Compact</button>
                        <button class="button" onclick="setSize('450px', '700px')">Large</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>üìà Analytics Features</h2>
            <ul>
                <li><strong>User Engagement:</strong> Track widget opens, message counts, session duration</li>
                <li><strong>User Satisfaction:</strong> Collect feedback ratings and comments</li>
                <li><strong>Performance Monitoring:</strong> Track API errors and response times</li>
                <li><strong>Usage Patterns:</strong> Understand peak usage times and popular questions</li>
                <li><strong>Integration Health:</strong> Monitor widget loading and functionality</li>
            </ul>

            <button class="button" onclick="downloadAnalytics()">Download Sample Analytics Data</button>
            <button class="button secondary" onclick="clearAnalytics()">Clear Analytics Data</button>
        </div>

        <div class="demo-section">
            <h2>üéØ Use Cases</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 15px;">
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4>Government Websites</h4>
                    <p>Provide citizens with nonpartisan voting information and election guidance.</p>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4>News Websites</h4>
                    <p>Offer readers factual election information without editorial bias.</p>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4>Educational Platforms</h4>
                    <p>Help students and educators access civic education resources.</p>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4>Community Organizations</h4>
                    <p>Support voter education and civic engagement initiatives.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ElectionSathi Widget - Demo Configuration -->
    <script>
        // Demo widget configuration (simulated)
        let currentWidget = null;
        let currentTheme = 'light';
        let currentPosition = 'bottom-right';
        let eventCount = 0;

        // Simulate widget functionality for demo
        function initDemoWidget() {
            // This would be the actual embed script in production
            console.log('Demo widget initialized');

            // Create demo widget button
            const button = document.createElement('div');
            button.id = 'demo-widget-button';
            button.innerHTML = 'üí¨';
            button.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                background: #4f46e5;
                color: white;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                cursor: pointer;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                transition: all 0.3s ease;
                z-index: 1000;
            `;

            button.onclick = () => {
                logEvent('widget_opened', { position: currentPosition, theme: currentTheme });
                alert('Widget opened! (This is a demo - in production, the full chat interface would appear)');
            };

            document.body.appendChild(button);
            currentWidget = button;
        }

        // Demo functions
        function openWidget() {
            logEvent('widget_opened', { trigger: 'demo_button' });
            alert('Widget opened! (Demo mode)');
        }

        function closeWidget() {
            logEvent('widget_closed', { trigger: 'demo_button' });
            alert('Widget closed! (Demo mode)');
        }

        function switchTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            logEvent('theme_changed', { newTheme: currentTheme });
            updateWidgetAppearance();
        }

        function changePosition() {
            const positions = ['bottom-right', 'bottom-left', 'top-right', 'top-left'];
            const currentIndex = positions.indexOf(currentPosition);
            currentPosition = positions[(currentIndex + 1) % positions.length];
            logEvent('position_changed', { newPosition: currentPosition });
            updateWidgetPosition();
        }

        function setPosition(position) {
            currentPosition = position;
            logEvent('position_set', { position });
            updateWidgetPosition();
        }

        function setTheme(theme) {
            currentTheme = theme;
            logEvent('theme_set', { theme });
            updateWidgetAppearance();
        }

        function setSize(width, height) {
            logEvent('size_changed', { width, height });
            alert(`Size changed to ${width} x ${height} (Demo mode)`);
        }

        function updateWidgetPosition() {
            if (!currentWidget) return;

            // Reset all positions
            currentWidget.style.top = 'auto';
            currentWidget.style.bottom = 'auto';
            currentWidget.style.left = 'auto';
            currentWidget.style.right = 'auto';

            // Set new position
            switch(currentPosition) {
                case 'bottom-left':
                    currentWidget.style.bottom = '20px';
                    currentWidget.style.left = '20px';
                    break;
                case 'top-right':
                    currentWidget.style.top = '20px';
                    currentWidget.style.right = '20px';
                    break;
                case 'top-left':
                    currentWidget.style.top = '20px';
                    currentWidget.style.left = '20px';
                    break;
                default: // bottom-right
                    currentWidget.style.bottom = '20px';
                    currentWidget.style.right = '20px';
            }
        }

        function updateWidgetAppearance() {
            if (!currentWidget) return;

            if (currentTheme === 'dark') {
                currentWidget.style.background = '#1f2937';
                currentWidget.style.color = 'white';
            } else {
                currentWidget.style.background = '#4f46e5';
                currentWidget.style.color = 'white';
            }
        }

        // Analytics simulation
        let sessionStart = Date.now();
        let analyticsEvents = [];

        function logEvent(eventName, properties = {}) {
            const event = {
                eventName,
                properties,
                timestamp: Date.now(),
                sessionId: 'demo-session-123'
            };

            analyticsEvents.push(event);
            updateAnalyticsDisplay();

            // Add to recent events display
            const eventsContainer = document.getElementById('recent-events');
            const eventDiv = document.createElement('div');
            eventDiv.innerHTML = `<span style="color: #059669;">${new Date().toLocaleTimeString()}</span> - ${eventName} ${JSON.stringify(properties)}`;
            eventsContainer.insertBefore(eventDiv, eventsContainer.firstChild);

            // Keep only last 10 events
            while (eventsContainer.children.length > 10) {
                eventsContainer.removeChild(eventsContainer.lastChild);
            }
        }

        function updateAnalyticsDisplay() {
            const messagesSent = analyticsEvents.filter(e => e.eventName === 'message_sent').length;
            const widgetOpens = analyticsEvents.filter(e => e.eventName === 'widget_opened').length;
            const feedbackGiven = analyticsEvents.filter(e => e.eventName === 'feedback_given').length;
            const sessionDuration = Math.floor((Date.now() - sessionStart) / 1000);

            document.getElementById('messages-count').textContent = messagesSent;
            document.getElementById('widget-opens').textContent = widgetOpens;
            document.getElementById('feedback-given').textContent = feedbackGiven;
            document.getElementById('session-duration').textContent = sessionDuration + 's';
        }

        function downloadAnalytics() {
            const data = {
                sessionStats: {
                    sessionId: 'demo-session-123',
                    duration: Date.now() - sessionStart,
                    totalEvents: analyticsEvents.length,
                    eventBreakdown: {}
                },
                events: analyticsEvents
            };

            // Count events by type
            analyticsEvents.forEach(event => {
                data.sessionStats.eventBreakdown[event.eventName] =
                    (data.sessionStats.eventBreakdown[event.eventName] || 0) + 1;
            });

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'election-sathi-analytics-demo.json';
            a.click();
            URL.revokeObjectURL(url);

            logEvent('analytics_downloaded', { eventCount: analyticsEvents.length });
        }

        function clearAnalytics() {
            analyticsEvents = [];
            sessionStart = Date.now();
            updateAnalyticsDisplay();
            document.getElementById('recent-events').innerHTML = '<div style="color: #6b7280;">Events cleared. New events will appear here...</div>';
            logEvent('analytics_cleared');
        }

        // Initialize demo
        document.addEventListener('DOMContentLoaded', function() {
            initDemoWidget();

            // Simulate some initial activity
            setTimeout(() => logEvent('page_loaded', { demo: true }), 500);
            setTimeout(() => logEvent('widget_viewed', { position: currentPosition }), 1000);

            // Update analytics display every second
            setInterval(updateAnalyticsDisplay, 1000);
        });

        // Simulate random user activity for demo purposes
        setInterval(() => {
            if (Math.random() < 0.1) { // 10% chance every 5 seconds
                const events = ['widget_viewed', 'message_sent', 'feedback_given', 'widget_opened'];
                const randomEvent = events[Math.floor(Math.random() * events.length)];
                logEvent(randomEvent, { simulated: true });
            }
        }, 5000);
    </script>
</body>
</html>